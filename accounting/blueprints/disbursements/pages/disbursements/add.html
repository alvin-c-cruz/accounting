{% extends "base.html" %}
{% from "macros.html" import string_field, select_field, date_field, textarea_field, entry_string_field, entry_select_field, submit_field, delete_btn %}

{% block title %}{{ obj.page_title }}{% endblock %}

{% block content %}
<h1>{{  obj.add_label  }}</h1>
{% for field, errors in form.errors.items() %}
<div class="alert alert-error">
    {{ form[field].label }}: {{ errors }}
</div>
{% endfor %}
<form action="{{ url_for(obj.add_route) }}" method="post" class="form">
    {{ form.csrf_token }}
    <div class="row">
        <div class="col-6">
            {{ date_field(form.record_date, True) }}
        </div>
        <div class="col-6">
            {{ date_field(form.bank_date) }}
        </div>
    </div>
    {{ select_field(form.vendor_id, True) }}
    <div class="row">
        <div class="col-6">
            {{ string_field(form.disbursement_number, True) }}
        </div>
        <div class="col-6">
            {{ string_field(form.check_number, True) }}
        </div>
    </div>
    {{ textarea_field(form.notes) }}

    <table class="table table-striped">
        <tr>
            <th>Account Title</th>
            <th>Debit</th>
            <th>Credit</th>
            <th>Notes</th>
            <th>Actions</th>
        </tr>
    {% for entry in form.entries %}
        <tr>
            <td>{{ entry_select_field(entry.account_id) }}</td>
            <td>{{ entry_string_field(entry.debit) }}</td>
            <td>{{ entry_string_field(entry.credit) }}</td>
            <td>{{ entry_string_field(entry.notes) }}</td>
            <td>
                {{ entry.csrf_token}}
                <a href="#" class="btn btn-danger mt-2 mb-2">-</a>
            </td>
        </tr>
    {% endfor %}
    </table>

    {{ submit_field(form.submit) }}
</form>
{% endblock %}